<div class="help-content-panel">
  <div>
    <div>
      <ul>
        <li><a>Integrations</a></li>
        <li><a>Pre-defined integrations with Zoho services</a></li>
        <li><a>Zoho Cliq Integration Tasks</a></li>
        <li><a>Fetch records</a></li>
      </ul>
    </div>
  </div>
  <div>
    <div>
      <div>
        <h1>Fetch Records</h1>
        <div>
          <div>
            <h4>Table of Contents</h4>
            <ul>
              <li><a>Overview</a></li>
              <li><a>Syntax</a></li>
              <li>
                <a>Examples</a>
                <ul>
                  <li><a>Fetching records that satisfy static criteria</a></li>
                  <li><a>Fetching records that satisfy dynamic criteria</a></li>
                </ul>
              </li>
              <li><a>Sample Response</a></li>
              <li><a>Related Tasks</a></li>
            </ul>
          </div>
          <div>
            <p>
              <strong>Note</strong>: This task is applicable to all Zoho
              Services except Zoho Creator.
            </p>
          </div>
          <h2><a></a>Overview</h2>
          <p>
            This&nbsp;task is used to fetch a list of records from a
            <a>Zoho Cliq database</a>,&nbsp;based on&nbsp;a given criteria.
          </p>
          <p>This task is based on Zoho Cliq API - <a>List Records</a>.</p>
          <h2><a></a>Syntax</h2>
          <div>
            <pre><span>&lt;</span><span>variable</span><span>&gt;</span><span> = </span><span>zoho</span><span>.cliq.getRecords</span><span>(</span><span>&lt;</span><span>database_name</span><span>&gt;</span>, <span>&lt;</span><span>query_map</span><span>&gt;, &lt;connection&gt;</span><span>)</span><span>;</span>
</pre>
          </div>
          <div>
            <table>
              <thead>
                <tr>
                  <td><strong>Params</strong></td>
                  <td><strong>Data type</strong></td>
                  <td><strong>Description</strong></td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><p>&lt;variable&gt;</p></td>
                  <td>
                    <p><span>KEY-VALUE</span></p>
                  </td>
                  <td>
                    <p>
                      specifies the variable which will
                      hold&nbsp;the&nbsp;response returned by Zoho Cliq.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td><p>&lt;database_name&gt;</p></td>
                  <td>
                    <p><span>TEXT</span></p>
                  </td>
                  <td>
                    <p>
                      specifies the <a>unique name</a> of the database from
                      which the records will be fetched
                    </p>
                  </td>
                </tr>
                <tr>
                  <td><p>&lt;query_map&gt;</p></td>
                  <td>
                    <p><span>KEY-VALUE</span></p>
                  </td>
                  <td>
                    <p>
                      specifies the query parameters to fetch specific records.
                      The applicable query params can be found <a>here</a>.
                    </p>
                    <p>
                      Click&nbsp;<a>here</a>&nbsp;to find the list of applicable
                      operators that can be used to specify multiple values in
                      criteria.
                    </p>
                    <div>
                      <p>
                        <strong>Note</strong>: You can provide an empty map in
                        which case all the records will be fetched.
                      </p>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td><p>&lt;connection&gt;</p></td>
                  <td>
                    <p><span>TEXT</span></p>
                  </td>
                  <td>
                    specifies the link name of the Zoho Cliq <a>connection</a>.
                    <div>
                      <p><strong>Note</strong>:</p>
                      <ul>
                        <li>
                          In view of&nbsp;<a
                            >stopping new authtoken generation</a
                          >,&nbsp;a Zoho OAuth connection with appropriate
                          scopes is mandatory&nbsp;for new integration tasks
                          (created after the deadline specified in the post) to
                          work as expected. Existing integration tasks will
                          continue to work with or without the connections
                          parameter unless the authtoken is manually
                          deleted&nbsp;from&nbsp;<a>accounts</a>.
                        </li>
                        <li>
                          Add relevant scopes as mentioned in&nbsp;Zoho Cliq API
                          - <a>List&nbsp;records</a>
                        </li>
                        <li>
                          Refer to&nbsp;<a>this&nbsp;post</a>&nbsp;for the list
                          of Zoho services that support the connections page.
                        </li>
                        <li><a>Learn more about connections</a></li>
                      </ul>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <h2>
            <a></a>Example1: Fetching records that satisfy static criteria
          </h2>
          <p>
            The following example fetches all the records&nbsp;from the database
            - <strong>availabilitydatabase</strong>&nbsp;that has a value -
            <strong>true</strong> in the column - <strong>availability</strong>.
          </p>
          <div>
            <pre>&nbsp;<span>query_map</span><span>=</span><span>Map</span><span>(</span><span>)</span><span>;</span>
&nbsp;<span>query_map</span><span>.</span><span>put</span><span>(</span><span>"criteria"</span><span>,</span><span>"availability==true"</span><span>)</span><span>;</span>
&nbsp;
&nbsp;<span>response_map</span><span>=</span><span>zoho</span><span>.cliq.getRecords</span><span>(</span><span>"availabilitydatabase"</span><span>,</span><span>query_map</span><span>,</span><span> "cliq_connection"</span><span>)</span><span>;</span>
</pre>
          </div>
          <p>where,</p>
          <div>
            <div>
              <div>
                <div>
                  <div>
                    <pre><span>response_map</span></pre>
                  </div>
                  <div>
                    is the variable which will hold
                    the&nbsp;<span>KEY-VALUE</span>&nbsp;response returned by
                    Zoho Cliq.
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>"availabilitydatabase"</span></pre>
                  </div>
                  <div>
                    is the <span>TEXT</span> that represents the unique name of
                    the database from which the records are fetched
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>query_map</span></pre>
                  </div>
                  <div>
                    is the <span>KEY-VALUE</span> variable that holds the query
                    parameters
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>"criteria"</span></pre>
                  </div>
                  <div>
                    is the key of <span>TEXT</span> data type that specifies the
                    search criteria
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>"availability==true"</span></pre>
                  </div>
                  <div>
                    is the value of <span>TEXT</span> data type that represents
                    the search criteria
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>"cliq_connection"</span></pre>
                  </div>
                  <div>
                    is the <span>TEXT</span> that represents the name of the
                    connection
                  </div>
                </div>
              </div>
            </div>
          </div>
          <h2>
            <a></a>Example2: Fetching records that satisfy dynamic criteria
          </h2>
          <p>
            Write the below script in the <strong>message handler</strong> of
            your Bot configuration to make it search and fetch records from the
            Zoho Cliq database - <strong>availabilitydatabase</strong>. The
            search condition is altered based on the user's response.
          </p>
          <ul>
            <li>
              <p>
                If the user sends <strong>YES</strong> to the Bot, the condition
                is set to <strong>availability==true</strong>. Thus, it fetches
                and displays all the records with value -
                <strong>true</strong> in the availability field.
              </p>
            </li>
            <li>
              <p>
                Otherwise, the condition is
                <strong>availability==false</strong>. Thus, it fetches and
                displays all the records with value - <strong>false</strong> in
                the availability field.
              </p>
            </li>
          </ul>
          <div>
            <pre>&nbsp;<span>response </span><span> = </span><span>Map</span><span>(</span><span>)</span><span>;</span>
&nbsp;<span>dynamic_value</span><span> = </span><span>false</span><span>;</span>
&nbsp;
&nbsp;<span>if</span><span>(</span><span>message</span><span>.</span><span>containsIgnoreCase</span><span>(</span><span>"YES"</span><span>)</span><span>)</span>
&nbsp;<span>{</span>
&nbsp;<span>dynamic_value</span><span> = </span><span>true</span><span>;</span>
&nbsp;<span>}</span>
&nbsp;
&nbsp;<span>query</span><span> = </span><span>"availability=="</span><span>+</span><span>dynamic_value</span><span>;</span>
&nbsp;<span>text</span><span> = </span><span>zoho</span><span>.cliq.getRecords</span><span>(</span><span>"availabilitydatabase"</span><span>, </span><span>{</span><span>"criteria"</span><span>:</span><span>query</span><span>}</span><span>,</span><span> "cliq_connection"</span><span>)</span><span>;</span>
&nbsp;<span>response</span><span>.</span><span>put</span><span>(</span><span>"text"</span><span>,</span><span>text</span><span>)</span><span>;</span>
&nbsp;<span>return response</span><span>;</span>
</pre>
          </div>
          <p>where,</p>
          <div>
            <div>
              <div>
                <div>
                  <div>
                    <pre><span>message</span></pre>
                  </div>
                  <div>
                    is the object of <span>TEXT</span> data type that holds the
                    most recent message sent in the Bot
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>text</span></pre>
                  </div>
                  <div>
                    is the&nbsp;<span>TEXT&nbsp;</span>variable that holds the
                    response text to be sent by the Bot
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>"availabilitydatabase"</span></pre>
                  </div>
                  <div>
                    is the&nbsp;<span>TEXT</span> that represents the unique
                    name of the database which needs to be searched
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>"criteria"</span></pre>
                  </div>
                  <div>
                    is the key of <span>TEXT</span> data type that specifies the
                    search criteria
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>query</span></pre>
                  </div>
                  <div>
                    is the&nbsp;<span>TEXT</span> variable that holds the search
                    condition
                  </div>
                </div>
                <div>
                  <div>
                    <pre><span>dynamic_value</span></pre>
                  </div>
                  <div>
                    is the&nbsp;<span>BOOLEAN</span> variable that holds the
                    search value
                  </div>
                </div>
              </div>
            </div>
          </div>
          <p>
            The following is the response of the above script when the user
            sends <strong>YES</strong>.
          </p>
          <img />
          <h2><a></a>Sample Response</h2>
          <p><strong>Success Response</strong></p>
          <ul>
            <li>
              <p>The success response returned is of the following format</p>
              <div>
                &nbsp;{<br />&nbsp;"status":"SUCCESS",<br />&nbsp;"url":"/api/v2/storages/availabilitydatabase/records",<br />&nbsp;"list":<br />&nbsp;[{"empid":"6","name":"John","availability":true,"id":"1775XXXX0002XXX431"},<br />&nbsp;{"empid":"5","name":"Austin","availability":true,"id":"1775XXXX0002XXX469"},<br />&nbsp;{"empid":"1","name":"Hanna","availability":true,"id":"1775XXXX0002XXX009"},<br />&nbsp;{"empid":"2","name":"Kate","availability":true,"id":"1775XXXX0002XXX039"}]<br />&nbsp;}
              </div>
            </li>
          </ul>
          <p>
            To fetch the ID of the newly created record, execute the following
            snippet:
          </p>
          <div>
            &lt;var1&gt; =&nbsp; &lt;response_variable&gt;.get("list");<br />for
            each &lt;loop_variable&gt;&nbsp;in &lt;var1&gt;<br />{<br />info
            &lt;loop_variable&gt;.get("id");<br />}
          </div>
          <p><strong>Failure Response</strong></p>
          <ul>
            <li>
              <p>
                The failure response returned for an
                <strong>incorrect database name</strong> is of the following
                format
              </p>
              <div>
                &nbsp;{<br />&nbsp;"status":"FAILURE",<br />&nbsp;"message":"Uh-oh!
                Looks like availabilitydata does not exist.",<br />&nbsp;"code":"platform_storage_database_not_found"<br />&nbsp;}
              </div>
            </li>
            <li>
              <p>
                The failure response returned for an
                <strong>incorrect or non-existent field name</strong> is of the
                following format
              </p>
              <div>
                &nbsp;{<br />&nbsp;"status":"FAILURE",{<br />&nbsp;"message":"The
                designation column does not exist.",<br />&nbsp;"code":"platform_storage_column_not_exists"<br />&nbsp;}
              </div>
            </li>
            <li>
              <p>
                The failure response for a&nbsp;<strong
                  >data type mismatch</strong
                >
                is of the following format
              </p>
              <div>
                {<br />&nbsp;"status":"FAILURE",<br />&nbsp;"message":"Invalid
                value given for field empid value Austin.",<br />&nbsp;"code":"platform_storage_fields_invalid_value"<br />&nbsp;}
              </div>
            </li>
            <li>
              <p>
                The failure response for an&nbsp;<strong
                  >invalid operator</strong
                >
                in criteria field is of the following format
              </p>
              <div>
                &nbsp;{<br />&nbsp;"status":"FAILURE",<br />&nbsp;"message":"Oops!
                Invalid operator specified for the criteria true",<br />&nbsp;"code":"platform_storage_invalid_criteria_operator"<br />&nbsp;}
              </div>
            </li>
          </ul>
          <h2><a></a>Related Tasks</h2>
          <ul>
            <li><a>Zoho Cliq API</a></li>
            <li>Common error codes can be&nbsp;<a>viewed here</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div><iframe></iframe></div>
</div>
