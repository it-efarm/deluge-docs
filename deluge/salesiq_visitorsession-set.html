<div class="help-content-panel">
  <div>
    <div>
      <ul>
        <li><a>Integrations</a></li>
        <li><a>Pre-defined integrations with Zoho services</a></li>
        <li><a>Zoho Sales IQ integration tasks</a></li>
        <li><a>Visitor session - set</a></li>
      </ul>
    </div>
  </div>
  <div>
    <div>
      <div>
        <div>
          <h1>Visitor session - set</h1>
          <div>
            <div>
              <h4>Table of Contents</h4>
              <ul>
                <li><a>Overview</a></li>
                <li><a>Syntax</a></li>
                <li>
                  <a>Example</a>
                  <ul>
                    <li><a>Example 1: Store a static value</a></li>
                    <li><a>Example 2: Store a dynamic value</a></li>
                  </ul>
                </li>
                <li><a>Response Format</a></li>
                <li><a>Related Links</a></li>
              </ul>
            </div>
            <div>
              <strong>Note:</strong> This task can only be executed&nbsp;from
              Zoho Sales IQ.
            </div>
            <h2><a></a>Overview</h2>
            <p>
              The&nbsp;<strong>zoho.salesiq.visitorsession.set</strong>&nbsp;task
              temporarily stores values&nbsp;during a chat conversation
              with&nbsp;your website visitors. This is used when your Sales
              IQ&nbsp;<a>Zobot</a>&nbsp;needs to remember&nbsp;dynamic pieces of
              information&nbsp;until the end of a session (chat conversation).
            </p>
            <h2><a></a>Syntax</h2>
            <div>
              <pre><span>&lt;</span><span>response</span><span>&gt; </span><span>= </span><span>zoho</span><span>.salesiq.visitorsession.set</span><span>(</span><span>&lt;</span><span>portal_name</span><span>&gt;</span>,<span> &lt;</span><span>session_data</span><span>&gt;</span>,<span> </span><span>&lt;</span><span>connection</span><span>&gt;</span><span>)</span><span>;</span></pre>
            </div>
            <p>where:</p>
            <div>
              <div>
                <div>
                  <table>
                    <tbody>
                      <tr>
                        <td><strong>Parameter</strong></td>
                        <td><strong>Data type</strong></td>
                        <td><strong>Description</strong></td>
                      </tr>
                      <tr>
                        <td><p>&lt;response&gt;</p></td>
                        <td><span>KEY-VALUE</span></td>
                        <td>
                          <p>
                            The response returned by Zoho Sales IQ that
                            represents the stored data.
                          </p>
                        </td>
                      </tr>
                      <tr>
                        <td><p>&lt;portal_name&gt;</p></td>
                        <td><span>TEXT</span></td>
                        <td><p>Name of your&nbsp;Zoho Sales IQ portal.</p></td>
                      </tr>
                      <tr>
                        <td><p>&lt;session_data&gt;</p></td>
                        <td><span>KEY-VALUE</span></td>
                        <td>
                          <p>
                            The values that need to be remembered
                            throughout&nbsp;the&nbsp;current session. The keys
                            of this parameter can be used in
                            <a>zoho.salesiq.visitorsession.get</a>&nbsp;task to
                            retrieve its corresponding value.&nbsp;
                          </p>
                        </td>
                      </tr>
                      <tr>
                        <td><p>&lt;connection&gt;</p></td>
                        <td><span>TEXT</span></td>
                        <td>
                          <p>The link name of the <a>connection</a>.</p>
                          <div>
                            <p><strong>Note</strong>:</p>
                            <ul>
                              <li>
                                In view of
                                <a>stopping new authtoken generation</a>,&nbsp;a
                                Zoho OAuth connection with appropriate scopes is
                                mandatory in order for new integration tasks
                                (created after the deadline specified in the
                                post) to work as expected. Existing integration
                                tasks will continue to work with or without the
                                connections parameter until you manually delete
                                the authtoken from <a>accounts</a>.
                              </li>
                              <li>
                                Scopes required for this task -
                                <strong
                                  >SalesIQ.portals.ALL, SalesIQ.visitors.ALL,
                                  SalesIQ.visitors.READ,
                                  SalesIQ.visitors.UPDATE</strong
                                >.
                              </li>
                              <li>
                                Refer to <a>this&nbsp;post</a> for the list of
                                Zoho services that support the connections page.
                              </li>
                              <li><a>Learn more about connections</a></li>
                            </ul>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <h2><a></a>Example 1: Store a static value</h2>
            <p>
              The following example stores the value -
              <strong>M</strong> against the key -
              <strong>size</strong>&nbsp;throughout a session.
            </p>
            <div>
              <pre>&nbsp;<span>session_map</span> = <span>Map</span><span>()</span><span>;</span>
&nbsp;<span>session_map</span>.<span>put</span><span>(</span><span>"size"</span>,<span>"M"</span><span>)</span><span>;</span>
&nbsp;
&nbsp;<span>response</span> = <span>zoho</span><span>.salesiq.visitorsession.set</span><span>(</span><span>"portal_1"</span>,<span> session_map</span>,<span> "salesIqConnection"</span><span>)</span><span>;</span></pre>
            </div>
            <p>where:</p>
            <div>
              <div>
                <div>
                  <div>
                    <div>
                      <pre><span>response</span>
</pre>
                    </div>
                    <div>
                      The <span>KEY-VALUE</span> response that represents the
                      stored data.
                    </div>
                  </div>
                  <div>
                    <div>
                      <pre><span>"portal_1"</span>
</pre>
                    </div>
                    <div>
                      The <span>TEXT</span> that represents the name of the
                      portal.
                    </div>
                  </div>
                  <div>
                    <div>
                      <pre><span>session_map</span>
</pre>
                    </div>
                    <div>
                      The <span>KEY-VALUE</span> variable that holds the data
                      that needs to be stored.
                    </div>
                  </div>
                  <div>
                    <div>
                      <pre><span>"salesIqConnection"</span>
</pre>
                    </div>
                    <div>
                      The <span>TEXT</span> that represents the link name of the
                      connection.
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <h2><a></a>Example 2: Store a dynamic value</h2>
            <p>
              The following example gets&nbsp;an email address&nbsp;from the
              visitor and stores it as a value to the&nbsp;key -
              <strong>visitorEmail</strong>&nbsp;throughout a session.
            </p>
            <div>
              <pre>&nbsp;<span>// Get name from the visitor's response</span>
&nbsp;<span>visitor_email</span> = <span>answers</span>.<span>get</span><span>(</span><span>"email"</span><span>)</span>.<span>get</span><span>(</span><span>"text"</span><span>)</span><span>;
</span>
&nbsp;<span>// Create a map to hold the data that needs to be stored</span>
&nbsp;<span>session_map</span> = <span>Map</span><span>()</span><span>;</span>
&nbsp;<span>session_map</span>.<span>put</span><span>(</span><span>"visitorEmail"</span>,<span>visitor_email</span><span>)</span><span>;</span>
&nbsp;
&nbsp;<span>response</span> = <span>zoho</span><span>.salesiq.visitorsession.set</span><span>(</span><span>"portal_1"</span>,<span> session_map</span>,<span> "salesIqConnection"</span><span>)</span><span>;</span></pre>
            </div>
            <p>where:</p>
            <div>
              <div>
                <div>
                  <div>
                    <div>
                      <pre><span>answers</span>
</pre>
                    </div>
                    <div>
                      The <span>KEY-VALUE</span>
                      <a>Zoho Sales IQ attribute</a>&nbsp;that will hold the
                      response of the visitor.
                    </div>
                  </div>
                  <div>
                    <div>
                      <pre><span>"email"</span>
</pre>
                    </div>
                    <div>
                      The <span>TEXT</span> that represents a
                      <a>context_id</a> which is a Zoho Sales IQ attribute.
                    </div>
                  </div>
                  <div>
                    <div>
                      <pre><span>visitor_email</span>
</pre>
                    </div>
                    <div>
                      The <span>TEXT</span>&nbsp;variable that holds the email
                      address of the visitor.
                    </div>
                  </div>
                  <div>
                    <div>
                      <pre><span>visitorEmail</span>
</pre>
                    </div>
                    <div>
                      The <span>TEXT</span>&nbsp;that represents the key that
                      can be used in <a>zoho.salesiq.visitorsession.get</a> task
                      to retrieve the stored email address of the current
                      visitor.
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <h2><a></a>Response Format</h2>
            <strong>Success response</strong>
            <ul>
              <li>
                <p>
                  The success response will be returned in the following format:
                </p>
                <div>
                  &nbsp;{<br />&nbsp;"url":
                  "/api/v2/portal_1/visitorsessions",<br />&nbsp;"object":
                  "session",<br />&nbsp;"data": {<br />&nbsp;"size": "m"<br />&nbsp;}
                </div>
              </li>
            </ul>
            <strong>Failure Response</strong>
            <ul>
              <li>
                <p>
                  The failure response for incorrect portal name will be
                  returned in the following format:
                </p>
                <div>
                  &nbsp;"error": {<br />&nbsp;"code": 1005,<br />&nbsp;"message":
                  "Invalid portal or wrong screenname"<br />&nbsp;}<br />&nbsp;}
                </div>
              </li>
            </ul>
            <h2><a></a>Related Links</h2>
            <ul>
              <li><a>Zoho Sales IQ integration tasks</a></li>
              <li><a>Connections</a></li>
              <li><a>Possible Zoho Sales IQ error responses</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div><iframe></iframe></div>
</div>
